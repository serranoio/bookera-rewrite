{"version":3,"file":"router.js","sourceRoot":"","sources":["../src/router.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,OAAO,EAAC,MAAM,EAAC,MAAM,aAAa,CAAC;AAEnC,4CAA4C;AAC5C,MAAM,MAAM,GAAG,QAAQ,CAAC,MAAM,IAAI,QAAQ,CAAC,QAAQ,GAAG,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;AAE3E;;;;;;;;;GASG;AACH,MAAM,OAAO,MAAO,SAAQ,MAAM;IAAlC;;QAeU,aAAQ,GAAG,CAAC,CAAa,EAAE,EAAE;YACnC,MAAM,oBAAoB,GACxB,CAAC,CAAC,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,QAAQ,CAAC;YACzD,IAAI,CAAC,CAAC,gBAAgB,IAAI,oBAAoB,EAAE;gBAC9C,OAAO;aACR;YAED,MAAM,MAAM,GAAG,CAAC;iBACb,YAAY,EAAE;iBACd,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAE,CAAiB,CAAC,OAAO,KAAK,GAAG,CAEpC,CAAC;YACd,IACE,MAAM,KAAK,SAAS;gBACpB,MAAM,CAAC,MAAM,KAAK,EAAE;gBACpB,MAAM,CAAC,YAAY,CAAC,UAAU,CAAC;gBAC/B,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,KAAK,UAAU,EACzC;gBACA,OAAO;aACR;YAED,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;YACzB,IAAI,IAAI,KAAK,EAAE,IAAI,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,EAAE;gBAC7C,OAAO;aACR;YAED,MAAM,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC;YACjC,IAAI,MAAM,CAAC,MAAM,KAAK,MAAM,EAAE;gBAC5B,OAAO;aACR;YAED,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,IAAI,IAAI,KAAK,QAAQ,CAAC,IAAI,EAAE;gBAC1B,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;gBACvC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;aAC5B;QACH,CAAC,CAAC;QAEM,gBAAW,GAAG,CAAC,EAAiB,EAAE,EAAE;YAC1C,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QACtC,CAAC,CAAC;IACJ,CAAC;IAvDU,aAAa;QACpB,KAAK,CAAC,aAAa,EAAE,CAAC;QACtB,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QAChD,MAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QACtD,wDAAwD;QACxD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;IACtC,CAAC;IAEQ,gBAAgB;QACvB,KAAK,CAAC,gBAAgB,EAAE,CAAC;QACzB,MAAM,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QACnD,MAAM,CAAC,mBAAmB,CAAC,UAAU,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;IAC3D,CAAC;CA2CF","sourcesContent":["/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nimport {Routes} from './routes.js';\n\n// We cache the origin since it can't change\nconst origin = location.origin || location.protocol + '//' + location.host;\n\n/**\n * A root-level router that installs global event listeners to intercept\n * navigation.\n *\n * This class extends Routes so that it can also have a route configuration.\n *\n * There should only be one Router instance on a page, since the Router\n * installs global event listeners on `window` and `document`. Nested\n * routes should be configured with the `Routes` class.\n */\nexport class Router extends Routes {\n  override hostConnected() {\n    super.hostConnected();\n    window.addEventListener('click', this._onClick);\n    window.addEventListener('popstate', this._onPopState);\n    // Kick off routed rendering by going to the current URL\n    this.goto(window.location.pathname);\n  }\n\n  override hostDisconnected() {\n    super.hostDisconnected();\n    window.removeEventListener('click', this._onClick);\n    window.removeEventListener('popstate', this._onPopState);\n  }\n\n  private _onClick = (e: MouseEvent) => {\n    const isNonNavigationClick =\n      e.button !== 0 || e.metaKey || e.ctrlKey || e.shiftKey;\n    if (e.defaultPrevented || isNonNavigationClick) {\n      return;\n    }\n\n    const anchor = e\n      .composedPath()\n      .find((n) => (n as HTMLElement).tagName === 'A') as\n      | HTMLAnchorElement\n      | undefined;\n    if (\n      anchor === undefined ||\n      anchor.target !== '' ||\n      anchor.hasAttribute('download') ||\n      anchor.getAttribute('rel') === 'external'\n    ) {\n      return;\n    }\n\n    const href = anchor.href;\n    if (href === '' || href.startsWith('mailto:')) {\n      return;\n    }\n\n    const location = window.location;\n    if (anchor.origin !== origin) {\n      return;\n    }\n\n    e.preventDefault();\n    if (href !== location.href) {\n      window.history.pushState({}, '', href);\n      this.goto(anchor.pathname);\n    }\n  };\n\n  private _onPopState = (_e: PopStateEvent) => {\n    this.goto(window.location.pathname);\n  };\n}\n"]}